import renderCards from"./renderCards.js";import ModalLogin from"../elements/modal/ModalLogin.js";import Fetch from"../api/Fetch.js";import{writeTokenToStorage}from"./localStorage.js";function loginBtn(){new ModalLogin({className:["modal","fade"],id:"exampleModalCenter",tabindex:"-1",role:"dialog",title:"Войти","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}).render("#header","beforebegin"),document.querySelector("#exampleModalCenter").addEventListener("click",(e=>{"exampleModalCenter"===e.target.id&&e.target.remove()})),document.getElementById("enterBtn").addEventListener("click",(async()=>{let e=document.querySelector("#userEmail").value,t=document.querySelector("#userPasswod").value,r=await Fetch.getToken(e,t);if(Fetch.assingToken(r),r.includes("Incorrect")){const e=document.querySelector(".text-danger");e&&e.remove();const t=document.createElement("p");t.innerText="Неправильно введён пароль или почта",t.classList.add("text-danger"),document.querySelector(".modal-body").append(t)}else{renderCards(),writeTokenToStorage(r),$("#exampleModalCenter").modal("hide");document.querySelector("#loginBtn").remove(),document.querySelector(".modal").remove(),document.querySelector("#createVisitBtn").classList.remove("hidden")}}))}export default loginBtn;